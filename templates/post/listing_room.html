{% extends "post/base.html" %}
{% load static %}

{% block content %}

<style>
    :root {
        --background-color: #f8f8f8;
        --text-color: #333;
        --secondary-bg-color: #e9e9e9;
        --review-border-color: #ccc;
    }

    @media (prefers-color-scheme: dark) {
        :root {
            --background-color: #1e1e1e;
            --text-color: #f0f0f0;
            --secondary-bg-color: #2a2a2a;
            --review-border-color: #555;
        }

        .listing-container {
            background-color: var(--background-color);
            color: var(--text-color);
        }
    }

    .listing-container {
        max-width: 900px;
        margin: auto;
        font-family: Arial, sans-serif;
        background-color: var(--background-color);
        color: var(--text-color);
        border-radius: 10px;
        padding: 20px;
    }

    .listing-photos {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
    }

    .listing-image {
        width: 200px;
        height: auto;
        border-radius: 8px;
    }

    .listing-details {
        background-color: var(--secondary-bg-color);
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
    }

    .reviews-section {
        background-color: var(--secondary-bg-color);
        padding: 15px;
        border-radius: 8px;
    }

    .review-item {
        margin-bottom: 10px;
        padding: 10px;
        border-bottom: 1px solid var(--review-border-color);
    }

    h1, h2 {
        color: var(--text-color);
    }

    p {
        color: var(--text-color);
    }

    strong {
        font-weight: bold;
    }
</style>

<div class="listing-container">

    {% if listing_room %}

    <div class="listing-photos">
        {% for image in listing_room.photos.all %}
            <img class="listing-image" src="{{ image.image.url }}" alt="Listing Image">
        {% endfor %}
    </div>

    <div class="listing-details">
        <h1>{{ listing_room.title }}</h1>
        <p>{{ listing_room.description }}</p>
        <p><strong>Price per night:</strong> ₹{{ listing_room.price_per_night }}</p>
        <p><strong>Bedrooms:</strong> {{ listing_room.bedrooms }}</p>
        <p><strong>Host:</strong> {{ listing_room.host.username }}</p>
        <p><strong>Available:</strong> {{ listing_room.available }}</p>

        <div class="reviews-section">
            <h2>Guest Reviews</h2>
            {% if listing_room.reviews.all %}
                {% for review in listing_room.reviews.all %}
                    <div class="review-item">
                        <p><strong>Rating:</strong> {{ review.rating }} ⭐</p>
                        <p><strong>Comment:</strong> {{ review.comment }}</p>
                    </div>
                {% endfor %}
            {% else %}
                <p>No reviews yet!</p>
            {% endif %}
        </div>
    </div>

    {% endif %}

</div>

{% endblock %} 